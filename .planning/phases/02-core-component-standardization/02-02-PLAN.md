---
phase: 02-core-component-standardization
plan: 02
type: execute
wave: 2
depends_on: [01]
files_modified:
  - src/features/transactions/components/transaction-form-modal.tsx
  - src/features/budgets/components/budget-form-modal.tsx
  - src/features/categories/components/category-form-modal.tsx
  - src/features/recurring/components/recurring-form-modal.tsx
  - src/features/accounts/components/account-form-modal.tsx
  - src/components/investments/add-investment-modal.tsx
autonomous: false
requirements: [FR1, FR3]
must_haves:
  truths:
    - "All feature modals use ModalWrapper, ModalBody, and ModalFooter correctly"
    - "Modals are responsive (Dialog on Desktop, Drawer on Mobile)"
  artifacts: []
  key_links: []
---

<objective>
Align all existing feature modals with the standardized core infrastructure and perform manual verification to ensure high visual fidelity and responsive behavior.

Purpose: Guarantee that every modal in the application provides a first-class UX on both desktop and mobile viewports.
Output: Refactored feature modals and a visually verified application.
</objective>

<execution_context>
@/Users/ivanapiscitelli/.gemini/get-shit-done/workflows/execute-plan.md
@/Users/ivanapiscitelli/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phase-2/RESEARCH.md
@.planning/phases/02-core-component-standardization/02-01-SUMMARY.md
@src/components/ui/modal-wrapper.tsx
</context>

<tasks>

<task type="auto">
  <name>Align Feature Modals with Core Standardization</name>
  <files>src/features/*/components/*-form-modal.tsx, src/components/investments/add-investment-modal.tsx</files>
  <action>
    - Audit all feature modals listed in the `files_modified` section.
    - Ensure they all consume the standardized `ModalWrapper`, `ModalBody`, and `ModalFooter`.
    - Verify they correctly handle `isOpen={true}`, `onClose`, and `editId` as passed by the `ModalProvider`.
    - Standardize internal spacing by using the new `ModalSection` and `ModalBody` layouts.
  </action>
  <verify>Check that all modals have a uniform structure (Wrapper -> Body -> Footer).</verify>
  <done>All feature modals are aligned with core standards.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Refactored modal infrastructure and feature-aligned modals.</what-built>
  <how-to-verify>
    1.  Start development server: 'npm run dev'.
    2.  Open each modal (Transaction, Budget, Category, Recurring, Account, Investment) on Desktop (wide viewport).
    3.  Confirm they appear as centered Dialogs with consistent spacing.
    4.  Switch to Mobile view (narrow viewport, < 640px).
    5.  Confirm each modal appears as a Bottom Drawer with safe-area support.
    6.  Verify that closing a modal (via X button, backdrop, or Cancel button) correctly clears URL params and closes the UI.
  </how-to-verify>
  <resume-signal>approved</resume-signal>
</task>

</tasks>

<verification>
Manual verification of all core modals across viewports successful.
</verification>

<success_criteria>
- All modals are fully responsive (Dialog/Drawer switch).
- Visual consistency across all forms (spacing, typography, buttons).
- Robust URL state synchronization.
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-component-standardization/02-02-SUMMARY.md`
</output>
