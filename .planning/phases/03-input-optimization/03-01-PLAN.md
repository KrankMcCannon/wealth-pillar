---
phase: 03-input-optimization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  [
    'src/components/ui/calendar.tsx',
    'src/components/ui/responsive-picker.tsx',
    'src/components/ui/fields/date-field.tsx',
  ]
autonomous: true
requirements: [3.1, 3.3]
must_haves:
  truths:
    - 'DateField uses a Popover on desktop and a Drawer on mobile'
    - 'Calendar uses react-day-picker with Italian locale and custom styling'
  artifacts:
    - path: 'src/components/ui/calendar.tsx'
      provides: 'shadcn/ui Calendar component'
    - path: 'src/components/ui/responsive-picker.tsx'
      provides: 'Wrapper for Popover/Drawer logic'
    - path: 'src/components/ui/fields/date-field.tsx'
      provides: 'Modernized date picker'
---

<objective>
Refactor the DateField component to use shadcn/ui Calendar (react-day-picker) and a responsive Popover/Drawer wrapper.
</objective>

<tasks>
<task type="auto">
  <name>Task 1: Create Calendar and ResponsivePicker primitives</name>
  <files>src/components/ui/calendar.tsx, src/components/ui/responsive-picker.tsx</files>
  <action>
    - Create `src/components/ui/calendar.tsx` based on shadcn/ui (react-day-picker wrapper).
    - Ensure it supports the Italian locale (it from date-fns).
    - Create `src/components/ui/responsive-picker.tsx` that abstracts the logic of "Popover on desktop, Drawer on mobile" using the 'use-media-query' hook.
  </action>
  <verify>Check if components render without errors and respect viewport changes.</verify>
  <done>UI primitives are available for use.</done>
</task>

<task type="auto">
  <name>Task 2: Refactor DateField</name>
  <files>src/components/ui/fields/date-field.tsx</files>
  <action>
    - Replace `MobileCalendarDrawer` with the new `ResponsivePicker` + `Calendar`.
    - Maintain existing logic for manual text input (DD/MM/YYYY) and API-compatible value (YYYY-MM-DD).
    - Update styles to use Tailwind v4 theme variables (e.g., glass-border, primary-subtle).
  </action>
  <verify>Open DateField on both desktop and mobile; verify date selection and manual entry.</verify>
  <done>DateField is modernized and responsive.</done>
</task>
</tasks>

<verification>
Ensure `npm run build` passes. Verify visual appearance in both modes.
</verification>

<success_criteria>
DateField is fully responsive and uses modern shadcn/ui patterns.
</success_criteria>

<output>
After completion, create '.planning/phases/03-input-optimization/03-01-SUMMARY.md'
</output>
